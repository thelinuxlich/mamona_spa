define("plugins/observable",["durandal/system","durandal/viewModelBinder"],function(e,r){function t(r){if(!r||e.isElement(r)||r.ko===ko)return!1;var t=f.call(r);return-1==l.indexOf(t)&&!(r===!0||r===!1)}function n(e){return e&&e.__observable__}function o(e,r,t){if(e.__observable__=!0,s.forEach(function(t){e[t]=c[t].bind(r)}),v.forEach(function(t){e[t]=function(){r.valueWillMutate();var n=b[t].apply(e,arguments);return r.valueHasMutated(),n}}),e.push=function(){if(t)for(var n=0;n<arguments.length;n++)a(arguments[n],!0);r.valueWillMutate();var o=b.push.apply(e,arguments);return r.valueHasMutated(),o},t)for(var n=0;n<e.length;n++)a(e[n],!0)}function a(r,a){if(!n(r)&&t(r)){if(r.__observable__=!0,e.isArray(r)){var l=ko.observableArray(r);o(r,l,a)}else for(var u in r)i(r,u,a);e.log("Converted",r)}}function i(r,t,n){var i,l,f=r[t];if(-1==u.indexOf(t)){if(e.isArray(f))i=ko.observableArray(f),l=!0,o(f,i,n);else{if("function"==typeof f)return;i=ko.observable(f),n&&a(f,!0)}Object.defineProperty(r,t,{get:i,set:function(e){var r;i(e),r=i.peek(),l?r.destroyAll||(r||(r=[],i(r)),o(r,i,n)):n&&a(r,!0)}})}}var l=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],u=["__moduleId__","__observable__"],f=Object.prototype.toString,s=["remove","removeAll","destroy","destroyAll","replace"],v=["pop","reverse","shift","sort","splice","unshift"],b=Array.prototype,c=ko.observableArray.fn;return{convertProperty:i,convert:a,isConverted:n,getObservable:function(){},install:function(){r.beforeBind=function(e){a(e,!0)}}}});