define("plugins/serializer",["durandal/system"],function(e){var t=["__moduleId__","__observable__"];return{defaultTypeAttribute:"type",removedKeys:t,replacer:function(e,r){return-1!=t.indexOf(e)?void 0:r},serialize:function(e,t){return JSON.stringify(e,this.replacer,t)},getTypeId:function(e){return e?e[this.defaultTypeAttribute]:void 0},typeMap:{},registerType:function(){var t=arguments[0];if(1==arguments.length){var r=t[this.defaultTypeAttribute]||e.getModuleId(t);this.typeMap[r]=t}else this.typeMap[t]=arguments[1]},reviver:function(e,t){var r=this.getTypeId(t);if(r){var i=this.typeMap[r];if(i)return i.fromJSON?i.fromJSON(t):new i(t)}return t},deserialize:function(e){var t=this;return JSON.parse(e,function(e,r){return t.reviver(e,r)})}}});